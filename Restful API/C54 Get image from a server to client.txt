[HttpGet("GetImage/{fileName}")]
public IActionResult GetImage(string fileName)
{
    // Directory where files are stored
    var uploadDirectory = @"C:\Pictures";
    var filePath = Path.Combine(uploadDirectory, fileName);

    // Check if the file exists
    if (!System.IO.File.Exists(filePath))
        return NotFound("Image not found.");

    // Open the image file for reading 
    var image = System.IO.File.OpenRead(filePath);// The image file is in memory by image variable
    var mimeType = GetMimeType(filePath); // the info for myu file

    // Return the file with the correct MIME type
    return File(image, mimeType);
}

// Helper method to get the MIME type based on file extension
/*
 This code defines a  method called GetMimeType that takes a file path as a parameter 
 and returns the corresponding MIME type as a string. 
 MIME types are used to indicate the nature and format of a file, 
 especially in web contexts where you need to specify the type of content you're sending, 
 like images, text, etc.

MIME type stands for Multipurpose Internet Mail Extensions type. 
It's a standard way to indicate the nature and format of a file or content. 
MIME types are used to tell browsers, email clients, and 
other software about the type of data they're handling, so they can process it correctly.
 */
private string GetMimeType(string filePath)
{
    var extension = Path.GetExtension(filePath).ToLowerInvariant();
    return extension switch
    {
        ".jpg" or ".jpeg" => "image/jpeg",
        ".png" => "image/png",
        ".gif" => "image/gif",
        _ => "application/octet-stream",
    };
}