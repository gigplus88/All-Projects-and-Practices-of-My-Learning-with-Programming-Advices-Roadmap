#include <iostream>
#include <string>
#include <vector>
#include <iomanip>
#include <fstream>

using namespace std;

const string ClientsFileName = "Clients.txt";
struct sClient
{
    string AccountNum;
    string PinCode;
    string Name;
    string Phone;
    double AccountBalance;

};

sClient ReadNewClient()
{

    sClient ClientInfo;

    cout << "Please Enter your Account Number?" ;
    // Usage of std::ws will extract all the whitespace charactre    ( التي تحدثفي البافير whitespace  لتفادي مسألة )
    getline(cin >> ws, ClientInfo.AccountNum);

    cout << "Please Enter your PinCode?" ;
    getline(cin, ClientInfo.PinCode);

    cout << "Please Enter your Name?" ;
    getline(cin, ClientInfo.Name);

    cout << "Please Enter your Phone?" ;
    getline(cin, ClientInfo.Phone);

    cout << "Please Enter your AccountBalance?" ;
    cin >> ClientInfo.AccountBalance;




    return ClientInfo;

}

string ConvertRecordToLine(sClient ClientInfo, string delim)
{
    string strClientRecord = "";

    strClientRecord = strClientRecord + ClientInfo.AccountNum + delim;
    strClientRecord = strClientRecord + ClientInfo.PinCode + delim;
    strClientRecord = strClientRecord + ClientInfo.Name + delim;
    strClientRecord = strClientRecord + ClientInfo.Phone + delim;
    strClientRecord = strClientRecord + to_string(ClientInfo.AccountBalance) + delim;


    return  strClientRecord.substr(0, strClientRecord.length() - delim.length());
}

void AddToFile(sClient ClientInfo, string delim)
{
    fstream FileClients;
    FileClients.open("FileClients.txt ", ios::out | ios::app); //Write Mode

    if (FileClients.is_open())
    {
        FileClients << ConvertRecordToLine( ClientInfo,  delim) <<"\n";
       

        FileClients.close();

    }
}

void AddClientToFile(string FileName , string stDataLine)
{
    fstream FileClient;
    FileClient.open(FileName, ios::out | ios::app); //Write Mode and append;

    if (FileClient.is_open())
    {
        FileClient << stDataLine << "\n";

        FileClient.close();

    }

}
void AddNewClient()
{
    sClient ClientInfo = ReadNewClient();

    AddClientToFile(ClientsFileName, ConvertRecordToLine(ClientInfo, "#//#"));
   // My Solution;
    /* ConvertRecordToLine(ClientInfo, "#//#");
    AddToFile(ClientInfo, "#//#");*/

}

void AddClients()
{
    char AddMore = 'Y';
    do
    {
        system("cls");

        cout << "Adding New Client:\n\n";
        AddNewClient();
        cout << "Client Added Successfully , do you want to add more client?";
        cin >> AddMore;
        cout << endl;

    } while (toupper(AddMore) == 'Y');

}




int main()
{
    AddClients();
    system("pause>0");

    return 0;

}















12342#//#37647#//#ayoub#//#394889489#//#4883.000000
2563#//#473#//#salim#//#947843#//#3849.000000
55#//#7382#//#saaad#//#84498334#//#38949.000000
mounia#//#3874#//#;ouniq#//#9384983#//#8493.000000
4765#//#8956#//#ufuif#//#8758474#//#85784.000000
885787#//#4738#//#ijodjjk#//#648350#//#67345.000000
75874#//#36554#//#ujki#//#893875473#//#37478.000000